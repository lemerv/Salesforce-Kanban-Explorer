<template>
  <div class="filter-control">
    <div class="filter-dropdown">
      <button
        type="button"
        class={buttonClass}
        data-filter-id={filterId}
        aria-haspopup="true"
        aria-expanded={filter.isOpen}
        onclick={handleToggleClick}
      >
        <lightning-icon
          icon-name="utility:filterList"
          size="x-small"
          alternative-text=""
        ></lightning-icon>
        <span class="filter-dropdown_label">{filter.label}</span>
        <lightning-icon
          icon-name="utility:down"
          size="xx-small"
          alternative-text=""
        ></lightning-icon>
      </button>
      <template if:true={isOpen}>
        <div
          class="filter-menu slds-dropdown slds-dropdown_left"
          data-filter-id={filterId}
          onclick={handleMenuClick}
          onkeydown={handleMenuKeydown}
          tabindex="-1"
        >
          <ul class="filter-menu_list" role="menu">
            <template for:each={options} for:item="option">
              <li
                key={option.value}
                class="filter-menu_item"
                role="menuitemcheckbox"
              >
                <lightning-input
                  type="checkbox"
                  value={option.value}
                  checked={option.selected}
                  label={option.label}
                  onchange={handleOptionChange}
                  class="filter-menu_checkbox"
                ></lightning-input>
              </li>
            </template>
          </ul>
        </div>
      </template>
    </div>
  </div>
</template>
